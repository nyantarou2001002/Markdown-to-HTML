<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown to HTML Converter</title>
    <style>
        /* エディタの表示領域を調整 */
        #editor {
            height: 400px;
            width: 100%;
            border: 1px solid #ccc;
        }
    </style>
    <!-- CDN から Monaco Editor を読み込む -->
    <script src="https://unpkg.com/monaco-editor@latest/min/vs/loader.js"></script>
</head>
<body>

<h1>Markdown to HTML Converter</h1>

<!-- Monaco Editor を表示するためのエリア -->
<div id="editor"></div>

<!-- 変換するためのフォーム -->
<form action="convert.php" method="post" id="markdownForm">
    <label for="outputType">出力形式を選択してください:</label>
    <select name="outputType" id="outputType">
        <option value="download">HTML をダウンロード</option>
        <option value="display">HTML を表示</option>
    </select>
    <button type="submit" onclick="submitForm()">変換</button>
</form>

<script>
    // Monaco Editor の設定と読み込み
    require.config({ paths: { 'vs': 'https://unpkg.com/monaco-editor@latest/min/vs' }});

    require(['vs/editor/editor.main'], function() {
        // Monaco Editor のインスタンスを作成
        window.editor = monaco.editor.create(document.getElementById('editor'), {
            value: '# ここに Markdown を入力してください\n', // 初期テキスト
            language: 'markdown',   // 言語モードを Markdown に設定
            theme: 'vs-dark'        // ダークテーマを使用（'vs-light' に変更可能）
        });
    });

    // フォーム送信時にエディタの内容を取得して送信する
    function submitForm() {
        const markdownText = window.editor.getValue();  // Monaco Editor の内容を取得
        const form = document.getElementById('markdownForm');
        const hiddenInput = document.createElement('input');
        hiddenInput.type = 'hidden';
        hiddenInput.name = 'markdown';
        hiddenInput.value = markdownText;
        form.appendChild(hiddenInput);  // エディタ内容をフォームに追加
    }
</script>

</body>
</html>
